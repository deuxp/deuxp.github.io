<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Express</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="fdfdf7de-41c3-437f-baa8-de95b1e001ae" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="data:image/jpeg;base64,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"/></div><h1 class="page-title">Express</h1></header><div class="page-body"><blockquote id="0ba00bc5-4a94-42e8-895c-c98f72ef6d6d" class="">Express is a minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications. — (From their <a href="https://expressjs.com/">website</a>)</blockquote><p id="0c1e36d6-903a-4958-9227-3bbf97cbbeb4" class="">
</p><p id="2870820a-f56e-4697-b144-7a5f7a785920" class="">{<span style="border-bottom:0.05em solid"><strong>Table of Contents}</strong></span></p><nav id="87056548-ae96-4f23-b180-dc7c14c014fc" class="block-color-teal_background table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#11d748d4-f867-4d4e-b4f9-ff1a51063d4c">Create Server</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#81cef91c-509e-45a2-aac1-da69a692530c">Route Handling</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d7160709-47ba-4e46-99c3-9eafc25ef134">Route Handlers:</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#52ee7310-2030-4d69-8643-62c012a16de7">Route parameters:</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a2ff4d48-18f5-429d-84d7-0fc37884c60b">POST Method: Handling forms &amp; input</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#43087bdd-2ac9-4767-9607-d48683dd1301"><em>POST</em></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b3b849af-8559-4371-adb1-05480e60b3cf">the form submission → POST</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5a2849a4-6a3e-420b-a2f1-37c95b5b1547">Express Router() - middleware; modular</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#9fedd279-23d5-4750-a547-53ed497da2e8">Template Engines</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b9329c4a-4ecb-4c84-9fca-c3d01d6f90f2">Why ..</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a0b7f347-101a-4f7c-ad8f-7374a7f3b276">Server-side Rendering</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#793ce3ce-8194-4e1e-bfe7-0e5c517f431c">Templates</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#a81c0c1c-4733-4ba1-b582-d37e5fc1e3eb">res.render()</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2f326ada-6196-480e-8170-6e3ad8803a6f">Alligator tags</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8ffa53a2-0933-4533-935b-299d206cf849">Conditional with Alligator tags</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#07d1456d-64b0-4894-bfaa-9efa0c874df4">Middleware</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#20ce6c96-cf0b-4611-be5e-33b1f5d17536">Logins</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f2a0b68f-ed5f-4c2c-b590-5cba81c6965d">Cookie management</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#020931ed-033e-4e56-903e-00e952604c4f">clear a cookie</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#9e973732-0a42-4a11-b373-1422531be3c7">Send Status Codes</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b3dbd2b4-4c5e-4aa8-ad76-8299530cf227">Secure passwords</a></div></nav><p id="9229f764-f0bb-45c5-8f22-2b36803c1804" class="">
</p><p id="59562176-6e05-46b7-9270-068e41760f50" class="">Node.js, often referred to as a framework, actually functions as a JavaScript runtime, powered by Google&#x27;s V8 engine — the same engine used to power the Chrome browser. Thus, Node essentially takes the place of the browser in the execution of JavaScript code. This allows developers to use JavaScript, a language designed to be compiled and run on the client-side, on the server-side, making a full-stack JavaScript application possible.</p><p id="0dbf117b-def0-4150-a7ee-7ae61c45ebd9" class="">The whole point of Node is to create an environment in which one can work with JavaScript on the backend.</p><p id="c03896bd-9197-47ab-93ec-35d974016190" class="">
</p><ul id="47580234-0f94-4028-b662-d8ef51369e89" class="bulleted-list"><li style="list-style-type:disc">This is a <a href="https://nodejs.org/en/"><strong>Node.js</strong></a> module available through the <a href="https://www.npmjs.com/"><strong>npm registry</strong></a>.</li></ul><p id="c3d80b0f-2d71-4b09-8b91-a57bce6fc1ca" class="">
</p><p id="a83de291-5f62-4f98-a11d-1e596cd92ad3" class="">To set things up simply:</p><p id="2e9e7484-9d24-4fec-a3ad-ed7658d066e6" class="">
</p><p id="b1ddfc54-1a45-4d71-bc64-7a3ae47c5213" class="">
</p><h1 id="11d748d4-f867-4d4e-b4f9-ff1a51063d4c" class="">Create Server</h1><pre id="5416c42a-0f2a-4d5b-9d13-8e091c24ab95" class="code"><code>const express = require(&#x27;express&#x27;)
const app = express(); // instance of express class -&gt; returns your application framework
const PORT = 8000

const urlDatabase = {
  &quot;b2xVn2&quot;: &quot;http://www.lighthouselabs.ca&quot;,
  &quot;9sm5xK&quot;: &quot;http://www.google.com&quot;
}

app.get(&#x27;/&#x27;, (req, res) =&gt; { // handle the response from the callback from the get method of the app obj // first arg is the page requested -&gt; url/PATH -&gt; &#x27;/&#x27; is the root of path
  res.send(&#x27;&lt;h1&gt;Hey Folks&lt;/h1&gt;&#x27;)
})


app.listen(PORT, () =&gt; {
  console.log(`Example app listening on port: ${PORT}`);
})</code></pre><p id="a34cc258-8b30-42ec-b77d-eb3b99870f05" class="">
</p><p id="4f6a746a-57d4-455f-9373-fc1be5078e82" class="">
</p><h1 id="81cef91c-509e-45a2-aac1-da69a692530c" class="">Route Handling</h1><hr id="6393eb45-095e-4d38-a9ae-a9284cfd5b2b"/><p id="5796ca46-0ac2-459a-beb8-ad943827b6e7" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="ca5413be-16a8-48c9-badc-972a52152028"><div style="font-size:1.5em"><span class="icon">👁️</span></div><div style="width:100%">redirecting creates another GET request which you should point at your desired route handler, or make a new one that redirects to outside of your server.</div></figure><p id="36549bb5-0e21-4f17-b490-0e1abb5be9e3" class="">
</p><p id="5be4aefa-4888-441a-9531-e521dc90ed26" class="">
</p><h2 id="d7160709-47ba-4e46-99c3-9eafc25ef134" class="">Route Handlers:</h2><hr id="5e4094db-abec-44ad-9172-7673441aa55a"/><p id="efd17f8d-1e91-4e6e-85cd-8d7d4ebc6420" class="">
</p><p id="f8d7ed93-de45-4d12-a273-1be753523563" class="">Adding endpoints (url + path)</p><pre id="15491b83-4dc9-47e0-9822-225884ba94af" class="code"><code>app.get(&#x27;/&#x27;, (req, res) =&gt; { // handle the response from the callback from the get method of the app obj // first arg is the page requested -&gt; url/PATH -&gt; &#x27;/&#x27; is the root of path
  res.send(&#x27;&lt;h1&gt;Hey Folks&lt;/h1&gt;&#x27;)
})

app.get(&#x27;/urls.json&#x27;, (req, res) =&gt; {
  res.json(urlDatabase) // sends our existing object as a json file format // which can then be parsed by the client
})

app.get(&#x27;/hello&#x27;, (req, res) =&gt; {
  res.send(&quot;&lt;html&gt;&lt;body&gt;Hello &lt;b&gt;World&lt;/b&gt;&lt;/body&gt;&lt;/html&gt;\n&quot;) // $ curl -i // will show the whold thing + the header information
})</code></pre><ul id="40b8ce8e-ef82-4c32-ab5d-691a369a0bc3" class="bulleted-list"><li style="list-style-type:disc">handle each path GET request uniquely with a callback</li></ul><p id="99e7a46e-92f6-4050-8faf-c8c987ae409a" class="">
</p><p id="328b7b5b-5967-4a51-a841-fb376031c74c" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="c04b3d46-7e74-4dfb-b7e6-96cb323c6ee9"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%"><strong>The order of route definitions matters!</strong> The <code>GET /urls/new</code> route needs to be defined <em>before</em> the <code>GET /urls/:id</code> route. Routes defined earlier will take precedence, so if we place this route after the <code>/urls/:id</code> definition, any calls to <code>/urls/new</code> will be handled by <code>app.get(&quot;/urls/:id&quot;, ...)</code> because Express will think that <code>new</code> is a <em>route parameter</em>. A good rule of thumb to follow is that routes should be ordered from most specific to least specific.</div></figure><p id="2dec45d5-3930-4353-b44f-d9ce681dfe68" class="">
</p><h2 id="52ee7310-2030-4d69-8643-62c012a16de7" class="">Route parameters:</h2><hr id="064cf3d6-c232-4c74-ab50-b6df1903c5ee"/><p id="56d57f22-861f-419e-97dd-7b19e1d7b982" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="6e772d6d-481d-4108-ad61-579df6b24cdd"><div style="font-size:1.5em"><span class="icon">♻️</span></div><div style="width:100%">Express <em>route parameters</em> pass data from the frontend to the backend via the request url.</div></figure><p id="9949fd3a-defc-4b36-933a-858a4e3d20da" class="">
</p><p id="e1cf656c-37e4-402b-834f-086cb9288dae" class="">Route parameters are named URL segments that are used to capture the values specified at their position in the URL. The captured values are populated in the <code>req.params</code> object, with the name of the route parameter specified in the path as their respective keys.</p><p id="a2dfaaa3-2874-46e1-bef9-3e905cc181e0" class="">
</p><ul id="fc8615b7-f325-414b-a66d-07152dc78220" class="bulleted-list"><li style="list-style-type:disc">It appears that Route params are declared in the .GET handler with the <code>:</code><ul id="44d68a22-f78a-44e2-aa8e-8558f0f36dfa" class="bulleted-list"><li style="list-style-type:circle">so when a client GETs with their browser a path, the values that they specify that match the position of the params will be declared in the response object params. It is declared at that time with the request. You are catching positionally the values in the params that you set in the &quot;Route Path&quot;<ul id="ebdd61c5-fe39-4d2e-ae05-8187fecb2c5f" class="bulleted-list"><li style="list-style-type:square">req.params.userId</li></ul></li></ul></li></ul><pre id="50966dae-81cd-4f22-8269-f06721bf357a" class="code code-wrap"><code>Route path: /users/:userId/books/:bookId
Request URL: http://localhost:3000/users/34/books/8989
req.params: { &quot;userId&quot;: &quot;34&quot;, &quot;bookId&quot;: &quot;8989&quot; }
</code></pre><p id="67fb76b0-eded-4288-9cbe-a6ab0ea95a41" class="">To define routes with route parameters, simply specify the route parameters in the path of the route as shown below.</p><pre id="783f84e9-60b7-4d14-a4c5-2009267c43ce" class="code code-wrap"><code>app.get(&#x27;/users/:userId/books/:bookId&#x27;, function (req, res) {
  res.send(req.params)
})</code></pre><p id="7e578425-3997-4a27-a797-887293669e19" class="">
</p><p id="c167caa9-2fc4-4029-bfe1-7ab4d30c073d" class="">
</p><p id="66c29ca5-e74f-4135-811d-ac05e79210ad" class="">
</p><h2 id="a2ff4d48-18f5-429d-84d7-0fc37884c60b" class="">POST Method: Handling forms &amp; input</h2><hr id="67e18671-e8b9-4686-a766-b8faa458e9a3"/><p id="495b3f91-a614-4d21-be55-ba076b66a234" class="">
</p><p id="0c4f0dae-f6f2-499e-af23-2592c0bab885" class="">important attributes of:</p><p id="e468fff7-70c8-4ab0-9f62-f03a480e1d09" class="">
</p><ul id="889c5392-fc7f-46f7-a585-788f2cfdbda7" class="bulleted-list"><li style="list-style-type:disc">form tag<ol type="1" id="af966e8e-fbc5-4f6b-912e-30993031a5cb" class="numbered-list" start="1"><li><code>action</code> → tells the form which URL to submit to</li></ol><ol type="1" id="5202da9e-22a8-4228-989b-f1306674542f" class="numbered-list" start="2"><li><code>method</code> → tells the form which HTTP method to use when submitting the form</li></ol></li></ul><p id="c85ec95c-1764-4323-b8c6-8a0e70cef4db" class="">
</p><ul id="5da5fbc6-6f8d-480a-adf0-0e1dfeb39526" class="bulleted-list"><li style="list-style-type:disc">input tag<ol type="1" id="48a60ea0-079f-4e5e-9e49-8ab48fcadeda" class="numbered-list" start="1"><li>name → identifies the data we are sending; in this case, it adds the name specified as the key to the data we&#x27;ll be sending in the body of our <em>POST</em> request</li></ol></li></ul><p id="157f4418-0fc2-4990-bef6-a06c109ad522" class="">
</p><h3 id="43087bdd-2ac9-4767-9607-d48683dd1301" class=""><em>POST</em></h3><hr id="68cab5a8-99e6-401a-ad4f-dd0452894b3b"/><p id="eda65fda-af9a-45ce-90ff-8f493044f293" class="">
</p><figure id="8091df69-011c-437a-b07d-056ef8a73ef4"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">POST - HTTP | MDN</div><div class="bookmark-description">The HTTP POST method sends data to the server. The type of the body of the request is indicated by the Content-Type header. The difference between and POST is that PUT is idempotent: calling it once or several times successively has the same effect (that is no side effect), where successive identical POST may have additional effects, like passing an order several times.</div></div><div class="bookmark-href"><img src="https://developer.mozilla.org/favicon-48x48.97046865.png" class="icon bookmark-icon"/>https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST</div></div><img src="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png" class="bookmark-image"/></a></figure><p id="799b6559-afff-4b77-8852-e93bd8f93d3d" class="">
</p><p id="ab23277e-92d8-45b5-a548-d087598722a2" class="">
</p><p id="6555dc0f-f28c-4d31-a5d2-7ae5f1cf69a0" class="">Unlike a GET request, a POST request has a body.. It is sent as a buffer, which is not human readable.</p><p id="96e56f70-d6a6-4035-bbd8-59747c000ff5" class="">Deal with this with a piesc of middlware called body-parser. It is a pkg available on npm.</p><p id="88384b9a-2d2a-4e38-a68a-13199dad7a18" class="">
</p><pre id="49487847-4949-4b44-9af9-8468be9a0848" class="code"><code>$ npm install body-parser</code></pre><p id="091dc1b2-55b0-4904-995d-dcd497b841e5" class="">
</p><p id="a1a1bcb2-6890-48bf-831a-53253d9c1a7c" class="">Init Code:</p><pre id="07a79c06-1377-461b-83dc-cccdb848f42d" class="code"><code>const bodyParser = require(&quot;body-parser&quot;);
app.use(bodyParser.urlencoded({extended: true}));</code></pre><p id="e51919c5-3517-4329-97df-c0c13bd79ba0" class="">
</p><ul id="61517192-4067-4bf2-9556-f692d4c0a488" class="bulleted-list"><li style="list-style-type:disc">body parser has to be intialized by express <code>.use()</code> method before the post handler so that when it constructs the request object, the buffer is already parsed into a string that we can read.<ul id="89b793cb-60b8-46e0-bb95-135b24474ad1" class="bulleted-list"><li style="list-style-type:circle">the data is then accessable using the body key of the req obj.<ul id="caae8a50-af5c-4e67-b90c-e8f483b6de55" class="bulleted-list"><li style="list-style-type:square">body parser is depricated<ul id="e728c3dd-fc23-42d9-99b5-6e3f0107b855" class="bulleted-list"><li style="list-style-type:disc">when you write your own shit, make sure that you are using packages that are maintatined and popular</li></ul></li></ul></li></ul></li></ul><p id="2fe07f1a-bfdc-4b58-8b81-45c7d52a9088" class="">
</p><p id="19b52521-50cf-4c15-b666-385e4e5c098f" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="a3a9f7e9-7042-4a46-bb03-4b1eb3663fe0"><div style="font-size:1.5em"><span class="icon">👁️</span></div><div style="width:100%">Keep an eye on things while your testing with the browser inspector.. specifically the network tab.</div></figure><p id="10f5da74-7b8f-46ec-9ab0-f6a5bac24415" class="">
</p><h3 id="b3b849af-8559-4371-adb1-05480e60b3cf" class="">the form submission → POST</h3><hr id="3211e274-4183-4a5a-ba72-d357194f4a51"/><p id="34037185-324b-42c1-8af2-2e61ff78ae04" class="">
</p><ul id="2f370bba-d137-4747-af01-8356bf54c907" class="bulleted-list"><li style="list-style-type:disc">The form has an <code>action</code> attribute set to <code>/urls</code> → or your specified route</li></ul><ul id="8e2d4cb5-9f12-425b-8f26-8cbe63233069" class="bulleted-list"><li style="list-style-type:disc">The form&#x27;s <code>method</code> is set to <code>POST</code></li></ul><ul id="cbb79460-4745-42eb-b39a-c274478597cc" class="bulleted-list"><li style="list-style-type:disc">The form has one named input, with the <code>name</code> attribute set to <code>longURL</code> → the variable name of the body object</li></ul><p id="eb884cbb-70c3-42e6-a1fb-095404fc71bd" class="">
</p><p id="0937daf3-bb45-446d-8e07-3d79b46f7a00" class="">This means when this form is submitted, it will make a request to <code>POST /urls</code>, and the body will contain one URL-encoded name-value pair with the name <code>longURL</code>.</p><p id="0982c0ce-1eaf-47f7-938d-f80775763e32" class="">SO ..</p><p id="e9ee9bb8-572f-4cac-ac20-98d4410b6572" class="">THEN you define the <strong>route</strong> that will match this POST request and handle it. </p><p id="8ba2d170-37f8-4352-a2b5-2c5dbcb44f5a" class="">start with a simple definition that logs the request body and gives a dummy response.</p><p id="b950565d-8666-40a4-8737-f695781130c4" class="">
</p><p id="43f6497b-0b35-405e-ac96-cdd4c0eb106b" class="">
</p><figure id="12c974a7-b8cd-49fc-a7b6-f28c83f4ef1f" class="image"><a href="Express%20fdfdf7de41c3437fbaa8de95b1e001ae/Screen_Shot_2021-11-24_at_11.35.40_PM.png"><img style="width:708px" src="Express%20fdfdf7de41c3437fbaa8de95b1e001ae/Screen_Shot_2021-11-24_at_11.35.40_PM.png"/></a></figure><p id="b40581f4-562e-4ea0-a0a2-f9860d51971e" class="">Note that it&#x27;s been parsed into a JS object, where <code>longURL</code> is the key; we specified this key using the <code>input</code> attribute <code>name</code>. The value is the content from the input field. This lovely formatting is courtesy of the <code>body-parser</code> library!</p><p id="4dc0a773-923b-4b2d-8f1e-1810704e1d9c" class="">
</p><p id="c57eef3a-6ec8-4110-8c66-6d4ded3555a9" class="">
</p><h2 id="5a2849a4-6a3e-420b-a2f1-37c95b5b1547" class="">Express Router() - middleware; modular</h2><hr id="591fdda3-27f7-43c1-b6a9-0c584997cd27"/><p id="cc20fa90-faa8-4473-ab93-c666ebd293a5" class="">
</p><figure id="58635867-abd1-4fca-9d8e-d54e3500093a"><a href="https://expressjs.com/en/guide/routing.html#express-router" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Express routing</div><div class="bookmark-description">Routing refers to how an application&#x27;s endpoints (URIs) respond to client requests. For an introduction to routing, see Basic routing. You define routing using methods of the Express app object that correspond to HTTP methods; for example, app.get() to handle GET requests and app.post to handle POST requests.</div></div><div class="bookmark-href"><img src="https://expressjs.com/images/favicon.png" class="icon bookmark-icon"/>https://expressjs.com/en/guide/routing.html#express-router</div></div><img src="https://expressjs.com/images/express-facebook-share.png" class="bookmark-image"/></a></figure><p id="4779ec45-84c4-4de0-a666-923de04649f9" class="">
</p><figure id="84a22658-3714-42cd-8ab4-6a5dbfb46161"><a href="https://github.com/zmcadie/LHL_flex_oct-18-21/tree/main/wk7_security_http/pokedex-app" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">LHL_flex_oct-18-21/wk7_security_http/pokedex-app at main · zmcadie/LHL_flex_oct-18-21</div><div class="bookmark-description">Contribute to zmcadie/LHL_flex_oct-18-21 development by creating an account on GitHub.</div></div><div class="bookmark-href"><img src="https://github.com/favicon.ico" class="icon bookmark-icon"/>https://github.com/zmcadie/LHL_flex_oct-18-21/tree/main/wk7_security_http/pokedex-app</div></div><img src="https://opengraph.githubassets.com/3cd4ee4be9d827a70844cd37cddfb812b61fb7e50c77752221b576b959321f53/zmcadie/LHL_flex_oct-18-21" class="bookmark-image"/></a></figure><p id="16b3ba4c-a3d5-49d4-be28-142f3c1c9ad5" class="">
</p><pre id="a60f8610-3800-45a6-8199-4ac9284840f0" class="code"><code>const express = require(&#x27;express&#x27;)
const router = express.Router()

const bcrypt = require(&#x27;bcrypt&#x27;)
const saltRounds = 10

const userRouter = (templateVars, users) =&gt; {
  const getUserByEmail = email =&gt; {
    const userId = Object.keys(users).find(id =&gt; users[id].email === email)
    if (!userId) return null
    const user = users[userId]
    return { id: userId, ...user }
  }

  router.get(&#x27;/login&#x27;, (req, res) =&gt; {
    if (templateVars.user) return res.redirect(&#x27;/&#x27;)
    res.render(&#x27;login&#x27;)
  })
  
  router.post(&#x27;/login&#x27;, (req, res) =&gt; {
    const { email, password } = req.body
    const user = getUserByEmail(email)
  
    if (bcrypt.compareSync(password, user.password)) {
      req.session.user_id = user.id
      return res.redirect(&#x27;/&#x27;)
    }
    res.redirect(&#x27;/users/login&#x27;)
  })
  
  router.get(&#x27;/logout&#x27;, (req, res) =&gt; {
    req.session = null
    return res.redirect(&#x27;/&#x27;)
  })
  
  router.get(&#x27;/register&#x27;, (req, res) =&gt; {
    if (templateVars.user) return res.redirect(&#x27;/&#x27;)
    res.render(&#x27;register&#x27;)
  })
  
  router.post(&#x27;/register&#x27;, (req, res) =&gt; {
    const { email, password, passConfirm } = req.body
    const user = getUserByEmail(email)
  
    const errors = []
    if (user) errors.push({msg: &#x27;email already in use&#x27;})
    if (password !== passConfirm) errors.push({msg: &#x27;passwords do not match&#x27;})
    if (errors.length) return res.render(&#x27;register&#x27;, { errors })
  
    const hashedPassword = bcrypt.hashSync(password, saltRounds)
  
    const newId = 1000 + Object.keys(users).length + 1
    users[newId] = { email, password: hashedPassword }
  
    req.session.user_id = newId
    res.redirect(&#x27;/&#x27;)
  })

  return router
}

module.exports = userRouter</code></pre><p id="27140bd3-d310-4c5b-b7af-d0929fa8e729" class="">
</p><p id="2f9aedc4-8321-4889-bd51-035305f243fa" class="">
</p><p id="9ab6ce8e-6360-46d9-8579-ed2a7f8a9ddc" class="">
</p><p id="6657ca98-8a70-44e5-a1d4-5bfedaac5f33" class="">
</p><h1 id="9fedd279-23d5-4750-a547-53ed497da2e8" class="">Template Engines</h1><hr id="2aa9dc11-78a6-4172-9771-75d37298fbc3"/><figure id="1a1b8c95-9162-40c9-b590-b3affb3940df" class="image"><a href="Express%20fdfdf7de41c3437fbaa8de95b1e001ae/Screen_Shot_2021-11-24_at_10.37.16_AM.png"><img style="width:1627px" src="Express%20fdfdf7de41c3437fbaa8de95b1e001ae/Screen_Shot_2021-11-24_at_10.37.16_AM.png"/></a></figure><p id="851480c3-ae2d-4d70-b5a2-72e45888b274" class="">
</p><figure id="7dc01487-6615-4ad7-9966-65b10c0474a2"><a href="https://www.digitalocean.com/community/tutorials/how-to-use-ejs-to-template-your-node-application" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">How To Use EJS to Template Your Node Application | DigitalOcean</div><div class="bookmark-description">When quickly creating Node applications, a fast way to template your application is sometimes necessary. Jade comes as the default template engine for Express but Jade syntax can be overly complex for many use cases. Embedded JavaScript templates (EJS) can be used as an alternative template engine.</div></div><div class="bookmark-href"><img src="https://www.digitalocean.com/assets/community/favicon-16x16-ce9c1eb6d969d5b2ec276ae4b715756aa0e63106f33dc53a836687fdfee49ecd.png" class="icon bookmark-icon"/>https://www.digitalocean.com/community/tutorials/how-to-use-ejs-to-template-your-node-application</div></div><img src="https://www.digitalocean.com/assets/community/illustrations/DigitalOcean_Community-e00e73a18df20667c3117725e727f3ade330204dff619ad8153050ded7341627.jpg" class="bookmark-image"/></a></figure><p id="a5eea36b-a0d5-49c7-b581-68566b9200ce" class="">
</p><h2 id="b9329c4a-4ecb-4c84-9fca-c3d01d6f90f2" class="">Why ..</h2><hr id="10d8dded-d05f-4a99-afa8-2381b04df383"/><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="4d9d6f97-92bc-4bf2-9fd4-37458a1aa3dc"><div style="font-size:1.5em"><span class="icon">ℹ️</span></div><div style="width:100%">Its like one big template literal ..

Similar to template literals, which render over several lines. You could technically write html in the template literal.</div></figure><p id="d845444b-28b6-487f-9a47-ab718762f627" class="">
</p><p id="e31b53d3-0e9c-421b-9e37-3448db3396f6" class="">In practice it does not make sense to write a whole HTML doc in-line of a response object.. that is why we use the template engine. to render the HTML doc as the response to the GET.</p><p id="c659f4ac-de36-40f5-b456-24d3532caa8e" class="">
</p><p id="84ac79b2-c946-4246-99a8-53956442b32a" class="">Templates are files that define the presentation of a web apps data separately from the server logic.</p><p id="8c9a405a-853d-465a-bcba-d9e707c2d590" class="">
</p><p id="26b7a37e-95d3-42a1-8cb8-456ee06b4827" class="">Some reasons why a template is helpful include:</p><ol type="1" id="02af183e-2292-4370-9d02-902687d7c404" class="numbered-list" start="1"><li>Keeping server logic (in this case JavaScript) separate from markup (HTML), making it easier to modify or debug one without affecting the other</li></ol><ol type="1" id="974c8786-e2d4-4950-90e8-2fcb15ae23d5" class="numbered-list" start="2"><li>Separating different parts of an HTML document into different files, helping keep the length of HTML files short and manageable<ol type="a" id="b2c5c916-c40a-4768-91f3-980061053c75" class="numbered-list" start="1"><li>just like functional programming</li></ol><p id="116dbb9e-a12f-405f-a0d8-d7bc82004741" class="">
</p></li></ol><p id="8526aa03-938b-49b4-9b3e-bf954fe08990" class="">To utilize this wonderful invention you need two things </p><ol type="1" id="a98ee4f1-ec0f-4ce7-a1b1-0356f32c51b3" class="numbered-list" start="1"><li>template files</li></ol><ol type="1" id="a9012267-38df-4ff2-a40c-12aadacb1fb4" class="numbered-list" start="2"><li>template engine<ol type="a" id="cc02d931-f6e3-401c-9140-fdc6ddcdb1a2" class="numbered-list" start="1"><li>replaces variables in a template file with actual data</li></ol><ol type="a" id="f33104fd-8529-4aba-892e-1cf3116f411b" class="numbered-list" start="2"><li>then it transforms the template into an HTML file that is sent to the client</li></ol></li></ol><p id="18d2f0b2-5a7a-4923-a737-77e74c8d454c" class="">
</p><p id="24305b78-cbe9-4e78-b240-836f69cfbc22" class="">
</p><h2 id="a0b7f347-101a-4f7c-ad8f-7374a7f3b276" class="">Server-side Rendering</h2><hr id="28b37510-1e0e-460b-9b70-e9159c174d80"/><p id="99fe9605-e963-4e13-adb6-e0700df3299b" class="">
</p><ul id="806661cf-836b-4da7-bba4-5140c60fbac2" class="bulleted-list"><li style="list-style-type:disc">first you have to download the embedded javascript EJS template engine as a dependency from <strong>npm</strong></li></ul><p id="41ec1d7b-9c66-4b7f-8323-cfdf45794299" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="c0495e10-34a0-4fd0-a841-f4169965f7dc"><div style="font-size:1.5em"><span class="icon">➡️</span></div><div style="width:100%"><code>res.render(template, { variablesObject })</code> will look in a <code>views</code> folder for the view. So you only have to define <code>pages/index</code> since the full path is <code>views/pages/index</code>.</div></figure><p id="d7e6e00f-dae1-4a68-a001-6934d6ddcaca" class="">
</p><ul id="98c3e0e5-20e6-4b7a-bd84-92dbe509d734" class="bulleted-list"><li style="list-style-type:disc">then you you want to set that engine as the default for all of your views.. views being a folder with all of the template files</li></ul><p id="819d4a56-92f7-498b-b955-3976d578a5a3" class="">
</p><pre id="7bb25d3a-4c3c-4f7a-af68-6233b335ed67" class="code"><code>`app.set(&#x27;view engine&#x27;, &#x27;ejs&#x27;);`</code></pre><p id="818250f3-66ae-4c41-baf8-3380395cf2cb" class="">
</p><pre id="55a730a4-e6a0-443c-9c4a-cc202eb9c964" class="code"><code>// use res.render to load up an ejs view file // Server side Rendering</code></pre><p id="8bfc2f8e-0723-4ac9-9c7b-b5410dec6bf6" class="">
</p><h2 id="793ce3ce-8194-4e1e-bfe7-0e5c517f431c" class="">Templates</h2><p id="199fb77d-8156-4720-9f2c-cc7b9c5e9f1d" class="">
</p><ul id="04b12f15-9688-4d3f-9b8f-deb88453147a" class="bulleted-list"><li style="list-style-type:disc">common boilerplate code that is going to be used in every page over and over is called a <strong>partial</strong><ul id="06956d3b-38bf-4d18-a557-ecba749fa332" class="bulleted-list"><li style="list-style-type:circle">these include things like the header of a page</li></ul><ul id="8dcec3c8-8ee6-4f84-8d32-ed8b69ebe80c" class="bulleted-list"><li style="list-style-type:circle">footer</li></ul><ul id="e9ffad84-0117-4289-a6f3-053216159c2f" class="bulleted-list"><li style="list-style-type:circle">contact info</li></ul><ul id="b936da9e-742a-4422-9c07-197baa7c2636" class="bulleted-list"><li style="list-style-type:circle">menu items</li></ul><ul id="1f94e686-23a2-45d6-915f-f1aaa87155b9" class="bulleted-list"><li style="list-style-type:circle">the head information</li></ul><ul id="8bf00869-3501-4fa3-8fe9-3335fed46b39" class="bulleted-list"><li style="list-style-type:circle">etc</li></ul></li></ul><p id="66874640-b84c-46ae-b899-e53b51a1db30" class="">
</p><ul id="aba60873-9055-4593-83bc-c0ebc2ad2005" class="bulleted-list"><li style="list-style-type:disc">keep your partials in their own folder: <strong>/partials</strong><ul id="71ebb12a-010e-4c32-bd17-b092b9298bcf" class="bulleted-list"><li style="list-style-type:circle">keep everything separate, this way it is modular</li></ul></li></ul><p id="e2fea30e-2a4f-491b-93b5-be54d8e17c7b" class="">
</p><ul id="aa26b6fb-47b6-4cd2-a608-cb232050042a" class="bulleted-list"><li style="list-style-type:disc">keep your pages in their own folder: <strong>/pages</strong><ul id="6493d71c-e661-4e81-8d37-33843c85f123" class="bulleted-list"><li style="list-style-type:circle">then you stitch them together. Once the page renders and is sent back to the client as an HTML using alligator tags and <code>include()</code></li></ul><ul id="a5f56c9d-e110-4be7-83e8-c6d93e946002" class="bulleted-list"><li style="list-style-type:circle">Use <code>&lt;%- include(&#x27;RELATIVE/PATH/TO/FILE&#x27;) %&gt;</code> to embed an EJS partial in another file.<ul id="24f2b4f9-d2aa-4602-8c95-5eff43443d26" class="bulleted-list"><li style="list-style-type:square">The hyphen <code>&lt;%-</code> instead of just <code>&lt;%</code> to tell EJS to <strong>render raw HTML</strong>.</li></ul><ul id="82efa315-18ab-4684-a4c1-1c8ab22588af" class="bulleted-list"><li style="list-style-type:square">The path to the partial is relative to the current file.</li></ul><p id="5bcefc73-0c5b-4c7d-b336-01badc3eadae" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="7d7aef49-9488-4437-9dd4-9a377dfc5658"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Pay attention to the alligator tags if the partials are not rendering, you may be missing a simple <code>- or =</code> for output</div></figure></li></ul></li></ul><p id="cb2bc2c9-c82e-4c6a-b17e-1988a1b64ebc" class="">
</p><h3 id="a81c0c1c-4733-4ba1-b582-d37e5fc1e3eb" class="">res.render()</h3><p id="a5f3ea8e-9345-4dbb-b9c9-1d42fa2c81d6" class="">
</p><ul id="5067ff5f-2d0b-4d48-96f6-0da5a87889e8" class="bulleted-list"><li style="list-style-type:disc"><strong>Variables</strong> are passed to the pages using their relative path as the first arg and the variable as the second arg in the <code>.render()</code> method<ul id="59858aea-52b8-471b-add0-55b3ada72b98" class="bulleted-list"><li style="list-style-type:circle">The variables are passed in as an object that calls the variables defined elsewhere in the server file.<ul id="cc436a59-5c51-476d-9ce6-7e6a095ce011" class="bulleted-list"><li style="list-style-type:square">the <strong>key:value</strong> pairs are necessary even if you are only sending one variable to a template<ul id="d23c3d28-5876-4559-bd3a-cdd884da42c3" class="bulleted-list"><li style="list-style-type:disc">this is so they can be called in any order from the template<ul id="40054cc1-d913-4b99-aad9-a81f5dd0bef8" class="bulleted-list"><li style="list-style-type:circle">it may be worth a test to see if the new ES6 object shorthand applies to this.</li></ul></li></ul><p id="c192a6de-7256-48bc-a655-13559e8af98f" class="">
</p></li></ul></li></ul></li></ul><pre id="fded6a83-74d8-41a7-8fcb-22f5dae379d3" class="code"><code>app.get(&#x27;/&#x27;, function(req, res) {
  var mascots = [
    { name: &#x27;Sammy&#x27;, organization: &quot;DigitalOcean&quot;, birth_year: 2012},
    { name: &#x27;Tux&#x27;, organization: &quot;Linux&quot;, birth_year: 1996},
    { name: &#x27;Moby Dock&#x27;, organization: &quot;Docker&quot;, birth_year: 2013}
  ];
  var tagline = &quot;No programming concept is complete without a cute animal mascot.&quot;;

  res.render(&#x27;pages/index&#x27;, {
    mascots: mascots,
    tagline: tagline
  });
});</code></pre><p id="44e33e52-54af-44c0-8e33-67c58507e1ab" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="0ec52483-307a-4f4e-8b60-a7cfc06a027a"><div style="font-size:1.5em"><span class="icon">⚠️</span></div><div style="width:100%">caution about passing a variable to partials. They must be declared in every view that uses the partial else it will throw an error.</div></figure><p id="a6873969-c02e-4b05-8654-fc2fb0ce5c27" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="894451ee-a744-4e35-b0b2-6e7e0d02982b"><div style="font-size:1.5em"><span class="icon">♻️</span></div><div style="width:100%">Server restart is only necessary when making changes to your server file. Other changes like the views can be seen from a browser refresh</div></figure><p id="a5a0b802-d863-48e3-9a9a-e357de1e2b77" class="">
</p><h3 id="2f326ada-6196-480e-8170-6e3ad8803a6f" class="">Alligator tags</h3><table id="86f11504-4234-4a38-9a53-346f282c571f" class="simple-table"><tbody><tr id="9508a5bf-d31c-4289-8e1a-818e782245db"><td id="nFsG" class="">&lt;%= %&gt;</td><td id="f@co" class="" style="width:501px">show the results of the surrounded code</td></tr><tr id="88ccb508-14d5-469c-ba20-3f69904e235c"><td id="nFsG" class="">&lt;%- %&gt;</td><td id="f@co" class="" style="width:501px">escape characters</td></tr><tr id="bc0677af-f717-43d1-9c43-1999f1cc0761"><td id="nFsG" class="">&lt;% %&gt;</td><td id="f@co" class="" style="width:501px">show the results of the surrounded code if it has a value; else show nothing. (see fig. 1.1)</td></tr></tbody></table><p id="01dfc764-c2d0-4468-a24b-518cb86d86ea" class="">
</p><pre id="c35f2414-e3a6-4fb1-894b-e9a1e60dd9b7" class="code code-wrap"><code>&lt;!-- This line will not show up on the page --&gt;
&lt;% if(greeting) {%&gt;
  &lt;!-- This line will only show if greeting is truthy --&gt;
  &lt;h1&gt;&lt;%= greeting %&gt;&lt;/h1&gt;
&lt;% }%&gt;
</code></pre><p id="74ec05d4-edab-4708-9035-d884592cc141" class="">
</p><h3 id="8ffa53a2-0933-4533-935b-299d206cf849" class="">Conditional with Alligator tags</h3><pre id="fcbd3f99-07c3-4164-8a9b-f353b6361936" class="code"><code>&lt;% if(true){ %&gt;
   &lt;h1&gt;foo&lt;/h1&gt;
 &lt;% } else { %&gt;  
   &lt;h1&gt;bar&lt;/h1&gt;
&lt;% } %&gt;</code></pre><h1 id="07d1456d-64b0-4894-bfaa-9efa0c874df4" class="">Middleware</h1><hr id="3befbacd-53e8-464b-b43b-73a6a91fcc79"/><p id="b622acf5-0a9a-4d42-8960-76ee9533c60c" class="">
</p><p id="c5065a25-77bb-437b-85da-39ef3e43d557" class="">Declared before the request handlers using the <code>app.use()</code></p><p id="7754b345-35bd-4751-aad2-c1a88e8ebf77" class="">
</p><p id="e086dfd1-2de3-48f5-bc28-94668813216c" class="">
</p><h1 id="20ce6c96-cf0b-4611-be5e-33b1f5d17536" class="">Logins</h1><hr id="25939fab-327e-41ec-907f-5fc0628165b6"/><p id="f6f01364-86db-4382-9ae9-8ff32e09f20e" class="">
</p><p id="134af62d-fbce-4852-893f-59ff413f2c31" class="">Handling a login</p><ul id="e76519b9-c7a7-4acd-87d5-995be76b8b7c" class="bulleted-list"><li style="list-style-type:disc">make sure that the username is passed to each EJS template.. <figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="85fba31b-ca09-426c-aef6-0a4df2368332"><div style="font-size:1.5em"><span class="icon">♻️</span></div><div style="width:100%">All views that contain the header partial</div></figure><ul id="59b5d7f8-db63-491f-8504-f5e79ec2332a" class="bulleted-list"><li style="list-style-type:circle">Do this by adding it to the template vars of each route that renders a template<ul id="f6005956-a0c3-4a01-9afe-576e21c0bdee" class="bulleted-list"><li style="list-style-type:square">After setting the cookie with express&#x27; res.cookie (see below), pass it using <code>req.cookie[&quot;username&quot;]</code> in the templateVars<ul id="cfbbaa01-32c2-42f6-b0e0-ef352449d067" class="bulleted-list"><li style="list-style-type:disc">This is possible because the cookie is stored in the request header after it is set and is persistent for each page.</li></ul></li></ul></li></ul></li></ul><p id="e453b368-5f68-4916-bfb2-39efe7bd7c80" class="">
</p><p id="5cd550e4-8317-4bf1-96a3-8557d6a0f982" class="">
</p><p id="0342f055-b683-41fc-a239-6f8e96f73aa2" class="">
</p><h2 id="f2a0b68f-ed5f-4c2c-b590-5cba81c6965d" class="">Cookie management</h2><hr id="f39b5d18-2dc2-4b09-9f13-7d7c2d7b2940"/><p id="ccf5159c-6b63-4ed6-89d0-a7bd7144f381" class="">
</p><pre id="063ebbc2-b2e4-4278-95d4-b5bd82bd5c7f" class="code"><code>npm i cookie-parser</code></pre><figure id="b3bbc429-5bce-4e85-b746-56e152066b0e"><div class="source">https://github.com/expressjs/cookie-parser</div></figure><p id="7387630e-7b2d-479d-848f-5af60cb016ed" class="">
</p><p id="cef087af-4b5b-487d-9900-d3619edf7141" class="">A package called <code>cookie-parser</code> serves as <strong>Express middleware</strong> that facilitates working with cookies. <code>cookie-parser</code> helps us <strong><em>read</em></strong><strong> the values from the cookie</strong>. To <strong><em>set</em></strong> the values on the cookie, we can use <code>res.cookie</code>, a method provided by Express: <a href="http://expressjs.com/en/api.html#res.cookie">http://expressjs.com/en/api.html#res.cookie</a></p><p id="dd31c46b-d562-46c1-8d8c-0ad82799946e" class="">
</p><p id="8aab671a-321f-4f27-aa8d-bf46673b4cab" class="">
</p><h3 id="020931ed-033e-4e56-903e-00e952604c4f" class="">clear a cookie</h3><pre id="1d5ab2ac-1561-43c2-87cd-1ca758c980f3" class="code"><code>// Login handler: no passwd
app.post(&#x27;/login&#x27;, (req,res) =&gt; {
  res.cookie(&#x27;username&#x27;, req.body.username)
  res.redirect(&#x27;urls&#x27;)
})


app.post(&#x27;/logout&#x27;, (req, res) =&gt; {
  res.clearCookie(&#x27;username&#x27;)
  res.redirect(&#x27;urls&#x27;)
})</code></pre><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="079122a5-9237-4372-84af-df3bd7173fda"><div style="font-size:1.5em"><span class="icon">⚠️</span></div><div style="width:100%">the setting of the cookie and the clearing of the cookie has to be a string. dont use a variable from the <code>req</code>.</div></figure><p id="9c5fc051-db7e-45c2-a74a-fbac6a3c19bc" class="">
</p><p id="129e93ae-8d47-4dc9-b279-51fdd2495798" class="">
</p><p id="9ed5bb34-b14c-4739-8334-26316645b9d3" class="">
</p><p id="81c7fee0-7073-498b-8bee-cfb82e698553" class="">
</p><h1 id="9e973732-0a42-4a11-b373-1422531be3c7" class="">Send Status Codes</h1><pre id="c0f4cabf-99cd-41ef-8915-35da77e283e8" class="code"><code>res.status(400);
res.send(&#x27;None shall pass&#x27;);</code></pre><ul id="0ac5f69c-19ec-4214-990b-ac569b5e182a" class="bulleted-list"><li style="list-style-type:disc">may have to use return at some point depending on control flow of the response</li></ul><p id="ab648c36-b568-455b-9f20-0cd4016cfe39" class="">
</p><p id="91dbb026-bc1d-4a53-be74-c87ba694f492" class="">
</p><p id="110a401d-f910-43e5-996a-61befebb270a" class="">
</p><blockquote id="43488aaa-270b-4618-ad32-8036829177ab" class="">Refactoring an existing app can sometimes be a frustrating experience, but it is something you will frequently encounter when you work as a developer. It is much more common to be tasked with adding to an app rather than building one from scratch. What, if anything, could have been done to make refactoring and adding functionality to TinyApp easier?</blockquote><p id="208da097-7db0-4140-9cd2-9570c0885bc1" class="">
</p><p id="59aba6ae-d092-4a5b-bbfa-24aae8b40e3f" class="">
</p><p id="003e9f02-ae22-4fb3-ac71-3d2a2112f503" class="">
</p><h1 id="b3dbd2b4-4c5e-4aa8-ad76-8299530cf227" class="">Secure passwords</h1><figure id="52520df4-1a28-441e-bdd8-4e850d3d2b10" class="link-to-page"><a href="../Security%2052520df41a28441ebdd84e850d3d2b10.html"><span class="icon">🛰️</span>Security</a></figure><p id="6ca8a313-f6dc-495a-ad1a-797326205b10" class="">
</p><p id="3a908edc-9e62-41a8-94ca-1b88d3ba8738" class="">
</p><p id="14515d82-6814-4d75-a9bc-596177962dfb" class="">
</p><p id="09819081-17ec-4226-a5a6-007b6da2fc36" class="">
</p></div></article></body></html>