<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>API &amp; RESTful APIs</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="9757b812-efd5-4b4d-b8e8-6ef538b95764" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">üç±</span></div><h1 class="page-title">API &amp; RESTful APIs</h1></header><div class="page-body"><nav id="91351f92-fce0-4163-8537-87fea150ba2a" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#e02f6fc3-1cbe-4f51-b76d-9ca162e5554c">INTRO</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#45939a2f-bfd7-4ff8-9f3d-5601f86dd920">Unpack a JSON</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#a6b5b695-ae3b-43f7-b540-65918bec28bc">Requesting from multiple APIs</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e4182cf7-1875-4b60-9ac7-bc0afa891a88">#Async Pattern - Journal</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#e2affd5c-86cc-4a1c-8073-a27f2cb26e97">#functions - async - notes:</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2f29f4ce-5915-4050-91e7-ba2c99849636">#Pattern: Building an async callback function</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b004056a-7dcc-41d8-b28f-2d6eb312843b">#Tips for callback-hell</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#a94cb25f-c551-4828-8c85-3e4f2c8c519a">REST &amp; Advanced express</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#01f83a16-b20b-4781-a4ce-83f56edadecb">REST</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#890d1922-3494-4a64-88f3-840620f23ef4">REST constraints</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#658d4cdf-3669-410d-a011-ae781c6e8112">RESTful APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#9080da46-e4f0-42f3-ade7-e2681f8d3669">Example RESTful API endpoints</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7da5046c-ce04-4b4c-a384-9a14632705e3">Express modules</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f32d03db-a95b-477a-bc7c-26c842b66561"><strong>Using HTTP Methods for RESTful Services</strong></a></div></nav><p id="3ff7cc51-f107-4e20-89a9-e200b1e3e4ee" class="">
</p><figure id="515b9060-1a43-4142-9379-7e8dd7162d44" class="link-to-page"><a href="Framework%20&amp;%20Libraries%20a7e2b24bec50488f9bc614736667446d/Request%20515b90601a43414293797e8dd7162d44.html"><span class="icon">üìü</span>Request</a></figure><figure id="57e718ba-dc5f-44a7-90dd-0997269b9100" class="link-to-page"><a href="https://www.notion.so/Programming-Concepts-57e718badc5f44a790dd0997269b9100"><span class="icon">ü™°</span>Programming | Concepts</a></figure><figure id="e8d0de52-a89f-4914-b595-204688f6062a" class="link-to-page"><a href="Framework%20&amp;%20Libraries%20a7e2b24bec50488f9bc614736667446d/Promises%20e8d0de52a89f4914b595204688f6062a.html"><span class="icon">üí¨</span>Promises</a></figure><h1 id="e02f6fc3-1cbe-4f51-b76d-9ca162e5554c" class="">INTRO</h1><blockquote id="993be6cc-1f44-44db-b703-936f0a6f55d9" class="">An¬†<strong>application programming interface</strong>¬†(<strong>API</strong>) is a connection between¬†<a href="https://en.wikipedia.org/wiki/Computer">computers</a>¬†or between¬†<a href="https://en.wikipedia.org/wiki/Computer_program">computer programs</a>. It is a type of software¬†<a href="https://en.wikipedia.org/wiki/Interface_(computing)">interface</a>, offering a service to other pieces of¬†<a href="https://en.wikipedia.org/wiki/Software">software</a>.<a href="https://en.wikipedia.org/wiki/API#cite_note-1">[1]</a>¬†A document or standard that describes how to build or use such a connection or interface is called an¬†<em>API specification</em>. A computer system that meets this standard is said to¬†<em>implement</em>¬†or¬†<em>expose</em>¬†an API. The term API may refer either to the specification or to the implementation.</blockquote><blockquote id="f0f98d00-1c5b-46d2-8a64-fe3b9a2a6603" class="">In contrast to a¬†<a href="https://en.wikipedia.org/wiki/User_interface">user interface</a>, which connects a computer to a person, an application programming interface connects computers or pieces of software to each other. It is not intended to be used directly by a person (the¬†<a href="https://en.wikipedia.org/wiki/End_user">end user</a>) other than a¬†<a href="https://en.wikipedia.org/wiki/Computer_programmer">computer programmer</a>¬†who is incorporating it into software. An API is often made up of different parts which act as tools or services that are available to the programmer. A program or a programmer that uses one of these parts is said to¬†<em>call</em>¬†that portion of the API. The calls that make up the API are also known as¬†<a href="https://en.wikipedia.org/wiki/Subroutine">subroutines</a>, methods, requests, or¬†<a href="https://en.wikipedia.org/wiki/Communication_endpoint">endpoints</a>. An API specification¬†<em>defines</em>¬†these calls, meaning that it explains how to use or implement them.</blockquote><ul id="5697dd0e-56d1-4801-a4ad-58df1038a106" class="toggle"><li><details open=""><summary>Application Programming Interface ‚Äî helpful VIDEO description of API usage</summary><figure id="998aad25-5385-438f-bf4d-3f2aece709ff"><div class="source"><a href="https://youtu.be/7YcW25PHnAA">https://youtu.be/7YcW25PHnAA</a></div></figure></details></li></ul><p id="97de8281-a9d4-4f41-9c11-9ad8b76eae59" class="">
</p><p id="5a3307b0-26ff-41c2-ad2a-bcc4339a85da" class="">
</p><p id="4105f2f6-64b9-468f-972e-ed5ae3776807" class="">Connect to an API the same as you would with a HTTP method such as <strong>get</strong>, the address is directly to the API location on the server..</p><p id="d0e2bba9-7e48-4771-9cac-3b2ffe1ff6ba" class="">Specify the source path and the query of what you want in with the query parameters to get specific.</p><h2 id="45939a2f-bfd7-4ff8-9f3d-5601f86dd920" class="">Unpack a JSON</h2><pre id="4eb484e8-1454-4eee-bc5f-ff49079f0c65" class="code"><code>const {
      latitude,
      longitude
    } = JSON.parse(body);

// ...
cb(err, { latitude, longitude }); // pass the unpack.. shorthand so you dont have to create a variable name.. extra step</code></pre><p id="e2cbd8fd-76d0-475a-b18a-299cff99a842" class="">
</p><p id="dd521d7b-d03e-4b58-869e-44a724fcb4fa" class="">
</p><h1 id="a6b5b695-ae3b-43f7-b540-65918bec28bc" class="">Requesting from multiple APIs</h1><p id="a712101b-3434-42da-af0a-f9cc32980711" class="">
</p><p id="3dbf9771-1e28-45ab-9293-30fad4888265" class="">
</p><ul id="28dfa34e-9bf2-4ddf-9b2d-1eaa738da091" class="bulleted-list"><li style="list-style-type:disc">keep the fetching logic and the callback in separate files<ul id="f0f7f610-dcfe-4300-be94-08e4baaa4e6f" class="bulleted-list"><li style="list-style-type:circle">callback implemented on the running file<ul id="ff00925b-a452-4702-8e7b-6abaf51dba17" class="bulleted-list"><li style="list-style-type:square">export and test manually as you maneuver ‚Äî <ul id="a7ec9a39-e891-4a8a-ba63-65049f025cf1" class="bulleted-list"><li style="list-style-type:disc">by calling on the running on the index file with a callback<ul id="e1979735-5419-40b2-8c41-9213ec18def5" class="bulleted-list"><li style="list-style-type:circle">use split screen to work in this manner</li></ul></li></ul></li></ul></li></ul></li></ul><p id="19f16269-40b6-41fe-907b-15a5be7ec242" class="">
</p><h2 id="e4182cf7-1875-4b60-9ac7-bc0afa891a88" class="">#Async Pattern - Journal</h2><h3 id="e2affd5c-86cc-4a1c-8073-a27f2cb26e97" class="">#functions - async - notes:</h3><ul id="e705df26-b7a8-45e5-89bd-a7e976a631cd" class="bulleted-list"><li style="list-style-type:disc">so you basically write all of the separate request functions on its own file<ol type="1" id="74e91c26-aca3-46d9-a481-37b0daf09909" class="numbered-list" start="1"><li>build incrementally</li></ol></li></ul><ul id="906440ef-0ca9-4a39-a95d-5d1228450ea3" class="bulleted-list"><li style="list-style-type:disc">you export them to the index.js run file</li></ul><ul id="fe6aab74-e7e6-48de-a6bb-6a436812c41d" class="bulleted-list"><li style="list-style-type:disc">each function just requests one thing ‚Äî solves one problem</li></ul><ul id="3b91366c-305d-47c1-951b-7dca18af1317" class="bulleted-list"><li style="list-style-type:disc">they all take in a callback as a param ‚Äî to deal with thier resolve, and a data param for the necessary data they depend on ie., an ip address etc.<ol type="1" id="9bdcc98e-d3f0-4f09-a25a-dd62505ecd85" class="numbered-list" start="1"><li>this is to handle the resolve of the async function</li></ol><ol type="1" id="428d7da8-c550-46da-8942-98bb545bc091" class="numbered-list" start="2"><li>the callback is very simple for all ...<ol type="a" id="88085bef-b901-4112-99d0-72fa0bed01df" class="numbered-list" start="1"><li>it passes the resolve or an error</li></ol><ol type="a" id="f8643a9b-cf81-41fd-a0bf-d6c70fa754cd" class="numbered-list" start="2"><li>the cb has only 2 params itself</li></ol><ol type="a" id="ff2de557-c407-4f74-84d0-e34c18c52705" class="numbered-list" start="3"><li><code>(err, data) =&gt; { // }</code></li></ol><ol type="a" id="c555ddd8-a5dd-46af-b33b-38665b446176" class="numbered-list" start="4"><li>callit inside the func like cb(err, null) for error handleing or cb(err, resolve) err is null and resolve is the fetched.</li></ol></li></ol></li></ul><ul id="974daa52-aa79-4df5-b5b6-544a86f26ee5" class="bulleted-list"><li style="list-style-type:disc">they all need to handle errors properly<ol type="1" id="fd2a6765-68b8-4ac5-b2db-fc641c29ec9f" class="numbered-list" start="1"><li>if respnse code is anything other than <code>200</code></li></ol><ol type="1" id="87844a57-1677-40cf-a3f4-5ae2a91bef7d" class="numbered-list" start="2"><li>if the api address is wrong<ol type="a" id="7676205b-37e6-4695-ac0c-a62f2b33dc46" class="numbered-list" start="1"><li>they are also handled with the cb function; that is why it is generic</li></ol></li></ol></li></ul><ul id="7a98f7d6-4a2e-4352-bf9b-e35bed555842" class="bulleted-list"><li style="list-style-type:disc">Unpack a parsed JSON</li></ul><ul id="0391321f-1fae-4de5-96f0-0c402c7eb373" class="bulleted-list"><li style="list-style-type:disc">pass data to cb(nullErrror, DATA)</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="3ab553d8-bab0-4a72-a10d-fb96355bef0b"><div style="font-size:1.5em"><span class="icon">ü¶æ</span></div><div style="width:100%">make sure they all work by themselves before you start to play around with chaining and nesting.. They all have to perform their simple async task properly: first.</div></figure><p id="19f3e67f-1ac4-4df8-9b5c-281e37d10c3d" class="">
</p><h3 id="2f29f4ce-5915-4050-91e7-ba2c99849636" class="">#Pattern: Building an async callback function</h3><p id="0f5040d7-6e7d-48c5-9ab7-35f2023539bc" class="">
</p><ol type="1" id="87ffc819-12dd-4be6-87bb-e2242b8ba35b" class="block-color-orange_background numbered-list" start="1"><li>define<code>function(necessary data, callback)</code></li></ol><ol type="1" id="7d60f5e0-996b-46a3-87f1-a02e30148bd5" class="block-color-orange_background numbered-list" start="2"><li><code>request</code> from api with url</li></ol><ol type="1" id="1ca1f56f-b1b4-4a12-ac4d-9d91aab13728" class="block-color-orange_background numbered-list" start="3"><li>handle errors ‚Äî <code>cb(error, null)</code> <code>return</code>; ‚Üí rejected</li></ol><ol type="1" id="2e8c23db-71e6-42f2-b50e-9917ba396db6" class="block-color-orange_background numbered-list" start="4"><li>unpack resolved <code>json</code></li></ol><ol type="1" id="7db8d660-8e28-4632-85c6-3ef8d1001ed3" class="block-color-orange_background numbered-list" start="5"><li>pass to callback ‚Äî <code>cb(null, resolvedJSON)</code> ‚Üí resolved</li></ol><p id="457b9ce6-be89-4819-b54a-2c620a4b146d" class="">
</p><p id="c8da01fc-ded3-4ef1-a006-ae26bb39ea49" class="">
</p><h3 id="b004056a-7dcc-41d8-b28f-2d6eb312843b" class="">#Tips for callback-hell</h3><p id="a3c72dfc-3abb-4aa0-afb5-0254dcc94519" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="b8866c20-7d07-4d3c-a162-bf0699fe7b0a"><div style="font-size:1.5em"><span class="icon">üß≤</span></div><div style="width:100%">SO. You write them all and make sure that they each work simply. Then you glue them together! that is how you build apps with multiple api fetches.</div></figure><p id="7d89accc-2706-4832-9cd5-2fdcb8a69eac" class="">
</p><ul id="3ec692fb-5e8a-4787-b0c7-fe21c6e6e010" class="bulleted-list"><li style="list-style-type:disc">define a primary function that the index.js or whatever you call your run page can call.. only one call on that page<ul id="d6802a28-4e09-4430-a95b-ca425e39f845" class="bulleted-list"><li style="list-style-type:circle">It will be defined on the same file as the other functions.</li></ul><ul id="149d7045-eaca-4118-80e5-47aaab20ec8b" class="bulleted-list"><li style="list-style-type:circle">this prime function only takes in one param .. a callback! for handling the resulting data or error</li></ul></li></ul><ul id="152678ce-568a-4ccd-8bc4-92eedcbe637a" class="bulleted-list"><li style="list-style-type:disc">import and make sure it works empty and then simply</li></ul><p id="6228a75f-55a8-4067-b888-2476e6197389" class="">
</p><p id="0e1dd3a5-92ac-4579-980f-7d8eb450ffac" class="">
</p><p id="6cf2f6cd-640b-4d79-ad2f-1a81e7f3f3f6" class="">
</p><p id="67a6f0ee-aa2e-498d-9178-e3294126e1e9" class="">The waterfall of callback code: looks like a¬†<em>&quot;waterfall&quot; due to nesting of callbacks</em></p><figure id="98263d78-c324-40d6-a7b4-c341a2117139" class="image"><a href="API%20&amp;%20RESTful%20APIs%209757b812efd54b4db8e86ef538b95764/Screen_Shot_2021-11-18_at_5.28.21_PM.png"><img style="width:768px" src="API%20&amp;%20RESTful%20APIs%209757b812efd54b4db8e86ef538b95764/Screen_Shot_2021-11-18_at_5.28.21_PM.png"/></a></figure><p id="d96ff1b5-6ea8-4715-b9fb-1387969db489" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="98c9ca4d-ba77-4bab-9661-8fe22753c56c"><div style="font-size:1.5em"><span class="icon">üß≤</span></div><div style="width:100%">throw is like return except the catch func will be looking for this at the end of a runtime.</div></figure><p id="62e01f13-af30-4521-b031-1094b5d9de0a" class="">
</p><p id="c4f9644e-3ea5-4c29-890a-0e57e88735ee" class="">
</p><p id="14aead37-e0b1-41ae-9ef6-0083353b0d6b" class="">
</p><h1 id="a94cb25f-c551-4828-8c85-3e4f2c8c519a" class="">REST &amp; Advanced express</h1><h2 id="01f83a16-b20b-4781-a4ce-83f56edadecb" class="">REST</h2><p id="af61f865-ccca-4d3b-ab66-0b09eea9ee1a" class="">
</p><p id="a551f580-7f52-4783-a1d8-35fed7e6f656" class="">Is a set of conventions and practices in web development that deals with accessing and manipulating resources over HTTP.</p><p id="3a0b4ffa-9914-4399-b534-6780d7570eea" class="">
</p><p id="911e88fc-3b91-4a84-8a77-d1b135efd042" class="">In REST, the notion of <strong>read</strong> in CRUD is split into two methods: browse (search) a whole collection &amp; accessing (reading) a single piece of information</p><p id="8efe074d-f1ff-4d7d-baac-ffe13f4191eb" class="">
</p><p id="e9181774-6589-4780-b090-78b36ef8464d" class="">REST stands for Representational state transfer. REST is an architectural style for building APIs that conform to a set of constraints. APIs that conform to these constraints can be referred to as RESTful.</p><p id="63118c98-6755-4936-9b6b-87cac963f6cb" class=""><a href="https://en.wikipedia.org/wiki/Representational_state_transfer">https://en.wikipedia.org/wiki/Representational_state_transfer</a></p><h3 id="890d1922-3494-4a64-88f3-840620f23ef4" class="">REST constraints</h3><ul id="e5fd99e2-2c72-439c-9987-2f6dce47dc8b" class="bulleted-list"><li style="list-style-type:disc">Client‚Äìserver architecture</li></ul><ul id="a967a441-8444-4dd8-a81f-7e3f330814aa" class="bulleted-list"><li style="list-style-type:disc">Statelessness</li></ul><ul id="1c0f0159-c480-4eeb-b7a9-fb799fd67518" class="bulleted-list"><li style="list-style-type:disc">Cacheability</li></ul><ul id="efa66974-f221-452a-b197-8e4d3ce70ff4" class="bulleted-list"><li style="list-style-type:disc">Layered system</li></ul><ul id="9493a999-57be-495d-96b4-c8ad1297c77b" class="bulleted-list"><li style="list-style-type:disc">Code on demand (optional)</li></ul><ul id="a8ebb7bc-8b56-4bd9-a6d7-730206fea42f" class="bulleted-list"><li style="list-style-type:disc">Uniform interface</li></ul><p id="04725b17-d6af-4065-a6a9-992eb2f1a1be" class="">The majority of these constraints are met by using standard HTTP methods and web architecture (Browsers enable the client-server architecture model, HTTP is stateless by design, etc.)</p><h3 id="658d4cdf-3669-410d-a011-ae781c6e8112" class="">RESTful APIs</h3><p id="04a1c777-cfdc-4770-a0b2-5735fe0d99c1" class="">A RESTful API follows a few basic patterns:</p><ul id="96bbf43a-9a9a-4a4d-bc2d-5091e674fd25" class="bulleted-list"><li style="list-style-type:disc">Requests specify the resource they are requesting (using the URI)</li></ul><ul id="567b7342-8266-4468-8093-92caa29bab14" class="bulleted-list"><li style="list-style-type:disc">HTTP verbs are used semantically (CRUD) to express the intention of the request</li></ul><ul id="3b26fe3d-596c-4bcd-9658-d10dee59ca6c" class="bulleted-list"><li style="list-style-type:disc">Requests are scoped (collection of resources or single resource)</li></ul><ul id="3f224344-71d0-418b-9ce7-abba6a97e00d" class="bulleted-list"><li style="list-style-type:disc">Uses a uniform data format (usually JSON for APIs)</li></ul><ul id="0bae9238-5c02-4b62-bf69-4d8ddd3a5bfb" class="bulleted-list"><li style="list-style-type:disc">Requests are stateless &amp; must include all information needed to fulfill the request</li></ul><ul id="b4e94800-f9db-4d04-b2db-b09791e61edd" class="bulleted-list"><li style="list-style-type:disc">Idempotency ‚Äî making multiple identical requests should have the same result as making a single request</li></ul><h3 id="9080da46-e4f0-42f3-ade7-e2681f8d3669" class="">Example RESTful API endpoints</h3><div id="7056c13b-e067-41aa-8119-271383f7dca1" class="collection-content"><h4 class="collection-title">REST - action | method | endpoint</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M7.73943662,8.6971831 C7.77640845,8.7834507 7.81338028,8.8943662 7.81338028,9.00528169 C7.81338028,9.49823944 7.40669014,9.89260563 6.91373239,9.89260563 C6.53169014,9.89260563 6.19894366,9.64612676 6.08802817,9.30105634 L5.75528169,8.33978873 L2.05809859,8.33978873 L1.72535211,9.30105634 C1.61443662,9.64612676 1.2693662,9.89260563 0.887323944,9.89260563 C0.394366197,9.89260563 0,9.49823944 0,9.00528169 C0,8.8943662 0.0246478873,8.7834507 0.0616197183,8.6971831 L2.46478873,2.48591549 C2.68661972,1.90669014 3.24119718,1.5 3.90669014,1.5 C4.55985915,1.5 5.12676056,1.90669014 5.34859155,2.48591549 L7.73943662,8.6971831 Z M2.60035211,6.82394366 L5.21302817,6.82394366 L3.90669014,3.10211268 L2.60035211,6.82394366 Z M11.3996479,3.70598592 C12.7552817,3.70598592 14,4.24823944 14,5.96126761 L14,9.07922535 C14,9.52288732 13.6549296,9.89260563 13.2112676,9.89260563 C12.8169014,9.89260563 12.471831,9.59683099 12.4225352,9.19014085 C12.028169,9.6584507 11.3257042,9.95422535 10.5492958,9.95422535 C9.60035211,9.95422535 8.47887324,9.31338028 8.47887324,7.98239437 C8.47887324,6.58978873 9.60035211,6.08450704 10.5492958,6.08450704 C11.3380282,6.08450704 12.040493,6.33098592 12.4348592,6.81161972 L12.4348592,5.98591549 C12.4348592,5.38204225 11.9172535,4.98767606 11.1285211,4.98767606 C10.6602113,4.98767606 10.2411972,5.11091549 9.80985915,5.38204225 C9.72359155,5.43133803 9.61267606,5.46830986 9.50176056,5.46830986 C9.18133803,5.46830986 8.91021127,5.1971831 8.91021127,4.86443662 C8.91021127,4.64260563 9.0334507,4.44542254 9.19366197,4.34683099 C9.87147887,3.90316901 10.6232394,3.70598592 11.3996479,3.70598592 Z M11.1778169,8.8943662 C11.6830986,8.8943662 12.1760563,8.72183099 12.4348592,8.37676056 L12.4348592,7.63732394 C12.1760563,7.29225352 11.6830986,7.11971831 11.1778169,7.11971831 C10.5616197,7.11971831 10.056338,7.45246479 10.056338,8.0193662 C10.056338,8.57394366 10.5616197,8.8943662 11.1778169,8.8943662 Z M0.65625,11.125 L13.34375,11.125 C13.7061869,11.125 14,11.4188131 14,11.78125 C14,12.1436869 13.7061869,12.4375 13.34375,12.4375 L0.65625,12.4375 C0.293813133,12.4375 4.43857149e-17,12.1436869 0,11.78125 C-4.43857149e-17,11.4188131 0.293813133,11.125 0.65625,11.125 Z"></path></svg></span>action</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>method</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>endpoint</th></tr></thead><tbody><tr id="04d5b82b-525a-420a-b270-4e8b0cddab82"><td class="cell-title"><a href="API%20&amp;%20RESTful%20APIs%209757b812efd54b4db8e86ef538b95764/REST%20-%20action%20method%20endpoint%207056c13be06741aa8119271383f7dca1/List%20all%20users%2004d5b82b525a420ab2704e8b0cddab82.html">List all users</a></td><td class="cell-_`JW">GET</td><td class="cell-OnfB"><span class="selected-value select-value-color-pink">&quot;/users&quot;</span></td></tr><tr id="501af56f-8e15-413c-9168-c5d770093a7d"><td class="cell-title"><a href="API%20&amp;%20RESTful%20APIs%209757b812efd54b4db8e86ef538b95764/REST%20-%20action%20method%20endpoint%207056c13be06741aa8119271383f7dca1/Get%20a%20single%20user%20501af56f8e15413c9168c5d770093a7d.html">Get a single user</a></td><td class="cell-_`JW">GET</td><td class="cell-OnfB"><span class="selected-value select-value-color-blue">&quot;/users/:id&quot;</span></td></tr><tr id="73a3e2ff-f1ef-4131-86b4-c23c0dd0ed9a"><td class="cell-title"><a href="API%20&amp;%20RESTful%20APIs%209757b812efd54b4db8e86ef538b95764/REST%20-%20action%20method%20endpoint%207056c13be06741aa8119271383f7dca1/Change%20a%20user&#x27;s%20info%2073a3e2fff1ef413186b4c23c0dd0ed9a.html">Change a user&#x27;s info</a></td><td class="cell-_`JW">PUT</td><td class="cell-OnfB"><span class="selected-value select-value-color-blue">&quot;/users/:id&quot;</span></td></tr><tr id="bd5f8b91-1cd6-4a70-9733-ea82fd396194"><td class="cell-title"><a href="API%20&amp;%20RESTful%20APIs%209757b812efd54b4db8e86ef538b95764/REST%20-%20action%20method%20endpoint%207056c13be06741aa8119271383f7dca1/Add%20a%20new%20user%20bd5f8b911cd64a709733ea82fd396194.html">Add a new user</a></td><td class="cell-_`JW">POST</td><td class="cell-OnfB"><span class="selected-value select-value-color-pink">&quot;/users&quot;</span></td></tr><tr id="c8e9d11a-61cc-4b74-83d7-941a24c3f577"><td class="cell-title"><a href="API%20&amp;%20RESTful%20APIs%209757b812efd54b4db8e86ef538b95764/REST%20-%20action%20method%20endpoint%207056c13be06741aa8119271383f7dca1/Remove%20a%20user%20c8e9d11a61cc4b7483d7941a24c3f577.html">Remove a user</a></td><td class="cell-_`JW">DELETE</td><td class="cell-OnfB"><span class="selected-value select-value-color-blue">&quot;/users/:id&quot;</span></td></tr></tbody></table></div><h2 id="7da5046c-ce04-4b4c-a384-9a14632705e3" class="">Express modules</h2><p id="ca3d7cad-cb3d-42bd-81aa-f877499b8020" class="">Like we&#x27;ve explored with other JavaScript programs, Express apps should be broken in multiple smaller modules to help us manage our code.</p><p id="f15756b6-28e6-447f-80e5-c2fc52a45097" class="">The most basic level of modularization involves grouping routes that deal with the same resource into separate files called routers.</p><p id="ac85654d-ed06-4824-8c96-097ef79a8d60" class="">A common modular code structure involves grouping logic into Routes, Controllers, and Services.</p><ul id="ea0ec082-f4a3-4fe7-b990-c316a63ea5f4" class="bulleted-list"><li style="list-style-type:disc">Routes ‚Äî define API endpoints that map to controllers</li></ul><ul id="49b1ca99-2395-4922-a3d6-23a0a2743463" class="bulleted-list"><li style="list-style-type:disc">Controllers ‚Äî validate requests, parse queries, and send responses</li></ul><ul id="1d765372-f610-4122-a749-84c2b8abfba2" class="bulleted-list"><li style="list-style-type:disc">Services ‚Äî interact with other layers of our app (databases, external APIs) and return objects or errors</li></ul><p id="7aa7502e-4b5b-43fc-830a-ad9d340dd935" class="">
</p><p id="58e90858-f8f8-45ae-90d5-ba3c959ba3f8" class="">
</p><p id="a23413bd-8edf-455e-9c30-1386718842ac" class="">
</p><h1 id="f32d03db-a95b-477a-bc7c-26c842b66561" class=""><strong>Using HTTP Methods for RESTful Services</strong></h1><p id="c57c1216-bf25-4c94-933f-8407ec7e514c" class="">
</p><figure id="cffc3f88-80cc-4099-b177-f7e01895153f"><a href="https://www.restapitutorial.com/lessons/httpmethods.html" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">HTTP Methods for RESTful Services</div><div class="bookmark-description">The POST verb is most-often utilized to **create** new resources. In particular, it&#x27;s used to create subordinate resources. That is, subordinate to some other (e.g. parent) resource. In other words, when creating a new resource, POST to the parent and the service takes care of associating the new resource with the parent, assigning an ID (new resource URI), etc.</div></div><div class="bookmark-href">https://www.restapitutorial.com/lessons/httpmethods.html</div></div></a></figure><p id="0d39c35c-f9e1-41e6-82d9-fb6bbddc2854" class="">
</p><p id="da5cbb54-adf0-4922-85ec-364d25290e76" class="">
</p><p id="b52a4271-060d-4f24-b147-04e664022c71" class=""><div class="indented"><h1 id="eb8975da-44c9-47ad-b623-64f91fc42244" class="">Example</h1></div></p><figure id="9bb7b93d-2110-4ea2-b7de-3b19d1eb7366"><a href="https://github.com/zmcadie/LHL_flex_oct-18-21/tree/main/wk7_security_http/pokedex-app" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">LHL_flex_oct-18-21/wk7_security_http/pokedex-app at main ¬∑ zmcadie/LHL_flex_oct-18-21</div><div class="bookmark-description">Contribute to zmcadie/LHL_flex_oct-18-21 development by creating an account on GitHub.</div></div><div class="bookmark-href"><img src="https://github.com/favicon.ico" class="icon bookmark-icon"/>https://github.com/zmcadie/LHL_flex_oct-18-21/tree/main/wk7_security_http/pokedex-app</div></div><img src="https://opengraph.githubassets.com/3cd4ee4be9d827a70844cd37cddfb812b61fb7e50c77752221b576b959321f53/zmcadie/LHL_flex_oct-18-21" class="bookmark-image"/></a></figure><p id="aca65d83-79b9-4ae7-b85c-a56bbb22b895" class="">
</p><pre id="0046893d-4c9c-422d-bccf-fda1489be630" class="code"><code>const express = require(&#x27;express&#x27;)
const router = express.Router()

const bcrypt = require(&#x27;bcrypt&#x27;)
const saltRounds = 10

const userRouter = (templateVars, users) =&gt; {
  const getUserByEmail = email =&gt; {
    const userId = Object.keys(users).find(id =&gt; users[id].email === email)
    if (!userId) return null
    const user = users[userId]
    return { id: userId, ...user }
  }

  router.get(&#x27;/login&#x27;, (req, res) =&gt; {
    if (templateVars.user) return res.redirect(&#x27;/&#x27;)
    res.render(&#x27;login&#x27;)
  })
  
  router.post(&#x27;/login&#x27;, (req, res) =&gt; {
    const { email, password } = req.body
    const user = getUserByEmail(email)
  
    if (bcrypt.compareSync(password, user.password)) {
      req.session.user_id = user.id
      return res.redirect(&#x27;/&#x27;)
    }
    res.redirect(&#x27;/users/login&#x27;)
  })
  
  router.get(&#x27;/logout&#x27;, (req, res) =&gt; {
    req.session = null
    return res.redirect(&#x27;/&#x27;)
  })
  
  router.get(&#x27;/register&#x27;, (req, res) =&gt; {
    if (templateVars.user) return res.redirect(&#x27;/&#x27;)
    res.render(&#x27;register&#x27;)
  })
  
  router.post(&#x27;/register&#x27;, (req, res) =&gt; {
    const { email, password, passConfirm } = req.body
    const user = getUserByEmail(email)
  
    const errors = []
    if (user) errors.push({msg: &#x27;email already in use&#x27;})
    if (password !== passConfirm) errors.push({msg: &#x27;passwords do not match&#x27;})
    if (errors.length) return res.render(&#x27;register&#x27;, { errors })
  
    const hashedPassword = bcrypt.hashSync(password, saltRounds)
  
    const newId = 1000 + Object.keys(users).length + 1
    users[newId] = { email, password: hashedPassword }
  
    req.session.user_id = newId
    res.redirect(&#x27;/&#x27;)
  })

  return router
}

module.exports = userRouter</code></pre><p id="135eb98b-7f9a-4496-9107-53c8efca468a" class="">
</p></div></article></body></html>